document.addEventListener("DOMContentLoaded",(function(){function e(){document.querySelectorAll(".tableselect.new").forEach(e=>{new SlimSelect({select:e,showContent:"down",hideSelectedOption:!0}),e.classList.remove("new")})}document.querySelectorAll(".select-param").forEach(e=>{new SlimSelect({select:e,showContent:"down",hideSelectedOption:!0,onChange:e=>{console.log(e),document.querySelector(".importance .ss-single-selected").style.background=e.data.bg}})}),document.querySelectorAll(".tableselect").forEach(e=>{new SlimSelect({select:e,showContent:"down",hideSelectedOption:!0})});var t=0;function l(){t++,(a=document.querySelector(".teststeps-table").insertRow(document.newInd)).classList.add("new-reusable-row"),a.setAttribute("data-reusable",t),a.innerHTML='<td class="reusable-toggle"></td><td>1</td><td class="add-step-row">+</td><td class="delete"></td><td class="reusable-name no-border"><span><img src="img/refresh.svg" alt="">Login to Maximo</span></td><td class="no-border"></td><td class="no-border"></td><td class="no-border"></td><td class="no-border"></td><td class="no-border"></td><td class="reusable-sub"><span class="new-step">Add sub steps</span></td>';for(var l=1;l<=3;l++){var a;(a=document.querySelector(".teststeps-table").insertRow(document.newInd+l)).classList="new-reusable-row new-reusable-step",a.setAttribute("data-reusable",t),a.innerHTML='<td></td><td class="reusable-step">1</td><td class="add-step-row">+</td><td class="delete"></td><td>    <select name="" class="new tableselect">        <optgroup label="Event">            <option value="LaunchApp">LaunchApp</option>            <option value="Click">Click</option>            <option value="DoubleClick">DoubleClick</option>            <option value="RightClick">RightClick</option>            <option value="MouseOver">MouseOver</option>            <option value="SetValue">SetValue</option>        </optgroup>    </select></td><td>    <select name="" class="new tableselect">        <optgroup label="Test Object">            <option value="Password">Password</option>            <option value="Click">Click</option>            <option value="DoubleClick">DoubleClick</option>            <option value="RightClick">RightClick</option>            <option value="MouseOver">MouseOver</option>            <option value="SetValue">SetValue</option>        </optgroup>    </select></td><td>    <a class="open-modal" data-modal="test-object" href="#"><img src="img/obj.svg" alt=""></</td><td></td><td>    <a href="#" class="open-modal data-label" data-modal="data">Data</a></td><td>    <label>     <input type="checkbox">     <span class="checkmark"></span>    </label>    <label>     <input type="checkbox">     <span class="checkmark"></span>    </label></td><td></td>'}e(),s()}function s(){document.querySelectorAll(".steps-table-body tr:not(.new-reusable-step) td:nth-child(2)").forEach((e,t)=>{e.innerHTML=t+1});for(var e=1;e<=t;e++){var l=document.querySelectorAll('.new-reusable-step[data-reusable="'+e+'"]');l.forEach((e,t)=>{e.querySelector("td:nth-child(2)").innerHTML=t+1,e.classList.contains("last-substep")&&e.classList.remove("last-substep"),t==l.length-1&&e.classList.add("last-substep")})}}function a(e){document.querySelector('.modal[data-modal="'+e+'"]').classList.remove("active")}document.onclick=t=>{var a,o=document.querySelector(".new-step-modal");if(o&&o.remove(),document.querySelectorAll(".new-reusable-select").forEach(e=>{e.remove()}),t.target.classList.contains("delete")){if(t.target.closest("tr").classList.contains("new-reusable-row")&&!t.target.closest("tr").classList.contains("new-reusable-step")){var n=t.target.closest("tr").dataset.reusable;document.querySelectorAll('.new-reusable-row[data-reusable="'+n+'"]').forEach(e=>{e.remove()})}else t.target.parentElement.remove(),document.querySelectorAll(".editing").forEach(e=>{e.classList.remove("editing")});s()}else if(t.target.classList.contains("edit"))t.target.parentElement.classList.add("editing"),document.querySelector(".planning").classList.add("editing");else if(t.target.classList.contains("add-step-row")){var c=document.createElement("div");c.className="new-step-modal";var r=t.target.parentElement.rowIndex;c.innerHTML='<span class="new-step" data-index="'+r+'" data-position="above">Insert a New Step Above</span><span class="new-step" data-index="'+r+'" data-position="below">Insert a New Step Below</span>',document.querySelector(".teststeps-table-wrap").appendChild(c),c.style.position="absolute",c.style.left=t.target.offsetLeft+t.target.clientWidth+"px",c.style.top=t.target.offsetTop+"px"}else for(var d=document.querySelectorAll(".planning-row"),i=0;i<d.length;i++)d[i].contains(t.target)&&!d[i].classList.contains("editing")&&(document.querySelector(".planning").style.display="none",document.querySelector(".test-plan").style.display="block");if(t.target.classList.contains("new-reusable"))if(document.rowInd=t.target.dataset.index,document.newInd=+document.rowInd+1,t.target.classList.contains("existing")){var u=document.createElement("select");u.classList="tableselect new-reusable-select",u.innerHTML='<optgroup label="Reusable Flow"><option data-placeholder="true"></option><option value="Reusable Flow 1">Reusable Flow 1</option><option value="Reusable Flow 2">Reusable Flow 2</option><option value="Reusable Flow 3">Reusable Flow 3</option></optgroup>',document.currentRow.querySelector("td:nth-child(5)").appendChild(u),new SlimSelect({select:".new-reusable-select",showContent:"down",hideSelectedOption:!0,onChange:e=>{l(),document.querySelectorAll(".new-reusable-select").forEach(e=>{e.remove()})}}).open()}else a="new-reusable",document.querySelector('.modal[data-modal="'+a+'"]').classList.add("active");if(t.target.classList.contains("new-step-row")||document.querySelectorAll(".new-step-row").forEach(e=>{e.classList.remove("new-step-row")}),t.target.classList.contains("new-step")){var p,b=t.target.dataset.position;r=t.target.dataset.index;if("above"==b)var m=+r;else m=+r+1;if((w=document.querySelectorAll(".steps-table-body tr")[r-1]).classList.contains("new-reusable-row"))w.classList.contains("hidden")&&(w.classList.remove("hidden"),document.querySelectorAll('.new-reusable-row[data-reusable="'+w.dataset.reusable+'"]').forEach(e=>{e.classList.remove("hidden")})),(p=document.querySelector(".teststeps-table").insertRow(m)).classList="new-reusable-row new-reusable-step",p.setAttribute("data-reusable",w.dataset.reusable);else(p=document.querySelector(".teststeps-table").insertRow(m)).classList.add("new-step-row");p.innerHTML='<td></td><td>1</td><td class="add-step-row">+</td><td class="delete"></td><td>    <select name="" class="new tableselect">        <optgroup label="Event">            <option value="LaunchApp">LaunchApp</option>            <option value="Click">Click</option>            <option value="DoubleClick">DoubleClick</option>            <option value="RightClick">RightClick</option>            <option value="MouseOver">MouseOver</option>            <option value="SetValue">SetValue</option>        </optgroup>    </select></td><td>    <select name="" class="new tableselect">        <optgroup label="Test Object">            <option value="Password">Password</option>            <option value="Click">Click</option>            <option value="DoubleClick">DoubleClick</option>            <option value="RightClick">RightClick</option>            <option value="MouseOver">MouseOver</option>            <option value="SetValue">SetValue</option>        </optgroup>    </select></td><td>    <a class="open-modal" data-modal="test-object" href="#"><img src="img/obj.svg" alt=""></</td><td></td><td>    <a href="#" class="open-modal data-label" data-modal="data">Data</a></td><td>    <label>     <input type="checkbox">     <span class="checkmark"></span>    </label>    <label>     <input type="checkbox">     <span class="checkmark"></span>    </label></td><td></td>',e(),s()}if(t.target.classList.contains("reusable-toggle")){var w;n=(w=t.target.closest("tr")).dataset.reusable;w.classList.contains("hidden")?(w.classList.remove("hidden"),document.querySelectorAll('.new-reusable-row[data-reusable="'+n+'"]').forEach(e=>{e.classList.remove("hidden")})):(w.classList.add("hidden"),document.querySelectorAll('.new-reusable-row[data-reusable="'+n+'"]').forEach(e=>{e.classList.add("hidden")}))}},document.querySelector(".steps-table-body").addEventListener("contextmenu",(function(e){e.preventDefault(),document.querySelector(".new-step-modal")&&document.querySelector(".new-step-modal").remove(),document.currentRow=e.target.closest("tr"),document.currentInd=e.target.closest("tr").rowIndex;var t=document.querySelector(".teststeps-table").getBoundingClientRect(),l=document.createElement("div");l.className="new-step-modal new-reusable-modal";e.target.parentElement.rowIndex;return l.innerHTML='<span class="new-reusable existing" data-index="'+document.currentInd+'">Add Existing Reusable Flow<img src="img/refresh.svg" alt=""></span><span class="new-reusable" data-index="'+document.currentInd+'">Create a New Reusable Flow<img src="img/refresh.svg" alt=""></span>',document.querySelector(".teststeps-table-wrap").appendChild(l),l.style.position="absolute",l.style.left=e.pageX-t.x+"px",l.style.top=e.pageY-document.scrollingElement.scrollTop-t.y+"px",!1}),!1),document.querySelectorAll(".planning .board__btn button, .planning .btn-new").forEach(e=>{e.addEventListener("click",e=>{document.querySelectorAll(".editing").forEach(e=>{e.classList.remove("editing")})})}),document.querySelector(".planning .btn-new").addEventListener("click",e=>{document.querySelector(".planning").classList.add("editing");var t=document.createElement("tr");t.className="editing planning-row",t.innerHTML='<td><img src="img/folder.svg" alt=""></td><td class="plan-name"><input type="text" value=""></td><td><input type="text" value=""></td><td>0</td><td class="delete">Delete</td><td class="edit">Edit</td>',document.querySelector(".planning table tbody").appendChild(t)}),document.querySelector(".reusable_bank-container_click").addEventListener("click",e=>{e.target.classList.add("hidden")}),document.querySelector(".subfolder").addEventListener("click",e=>{document.querySelector(".test-plan-content").style.display="none",document.querySelector(".test-case-content").style.display="block"}),document.querySelector(".open-test-steps").addEventListener("click",e=>{document.querySelector(".test-case-content").style.display="none",document.querySelector(".teststeps").style.display="block",document.querySelector(".reusable_bank").style.display="block"}),document.querySelectorAll(".save-testcase, .cancel-editing").forEach(e=>{e.addEventListener("click",e=>{document.querySelector(".editable-content.editing").classList.remove("editing")})}),document.querySelector(".save-reusable").addEventListener("click",e=>{l(),a("new-reusable")}),document.querySelector(".cancel-reusable").addEventListener("click",e=>{a("new-reusable")}),document.querySelectorAll(".edit-button").forEach(e=>{e.addEventListener("click",t=>{e.parentElement.classList.add("editing")})})}));